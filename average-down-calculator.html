<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DOOHOON - ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    * { 
      margin: 0; 
      padding: 0; 
      box-sizing: border-box; 
    }
    
    body {
      background: radial-gradient(circle at 30% 20%, rgba(255,215,0,0.12), transparent 65%), 
                  radial-gradient(circle at 80% 80%, rgba(218,165,32,0.08), transparent 60%),
                  #0a0a0a;
      color: #fff;
      font-family: 'Poppins', sans-serif;
      padding: 20px;
      min-height: 100vh;
    }
    
    .container {
      max-width: 600px;
      margin: 0 auto;
    }
    
    .header {
      text-align: center;
      margin-bottom: 40px;
    }
    
    h1 {
      color: #ffd700;
      font-size: 2.5em;
      margin-bottom: 10px;
      background: linear-gradient(135deg, #ffd700 0%, #ffed4e 50%, #ffd700 100%);
      background-size: 200% auto;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      animation: shimmer 3s linear infinite;
    }
    
    @keyframes shimmer {
      0% { background-position: 0% center; }
      100% { background-position: 200% center; }
    }
    
    .subtitle {
      color: #c9a136;
      font-size: 1.1em;
    }
    
    .card {
      background: rgba(255,255,255,0.04);
      backdrop-filter: blur(20px);
      border: 2px solid rgba(255,215,0,0.2);
      border-radius: 20px;
      padding: 30px;
      margin-bottom: 20px;
      box-shadow: 0 8px 32px rgba(0,0,0,0.3);
    }
    
    .purchase-item {
      background: rgba(255,215,0,0.05);
      border: 1px solid rgba(255,215,0,0.2);
      border-radius: 15px;
      padding: 20px;
      margin-bottom: 15px;
      position: relative;
    }
    
    .purchase-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }
    
    .purchase-label {
      color: #ffd700;
      font-weight: 600;
      font-size: 1.1em;
    }
    
    .remove-btn {
      background: rgba(255,68,68,0.2);
      border: 1px solid rgba(255,68,68,0.3);
      color: #ff6b6b;
      padding: 8px 15px;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 600;
      transition: all 0.3s;
    }
    
    .remove-btn:hover {
      background: rgba(255,68,68,0.3);
      transform: scale(1.05);
    }
    
    .input-group {
      margin-bottom: 15px;
    }
    
    label {
      display: block;
      color: #daa520;
      margin-bottom: 8px;
      font-weight: 600;
      font-size: 0.95em;
    }
    
    input {
      width: 100%;
      padding: 15px;
      background: rgba(255,255,255,0.08);
      border: 1px solid rgba(255,215,0,0.3);
      border-radius: 10px;
      color: #fff;
      font-size: 1.1em;
      font-family: 'Poppins', sans-serif;
      transition: all 0.3s;
    }
    
    input:focus {
      outline: none;
      border-color: #ffd700;
      box-shadow: 0 0 15px rgba(255,215,0,0.3);
    }
    
    input::placeholder {
      color: rgba(255,255,255,0.3);
    }
    
    .btn {
      width: 100%;
      padding: 18px;
      border: none;
      border-radius: 12px;
      font-weight: 700;
      font-size: 1.1em;
      cursor: pointer;
      transition: all 0.3s;
      text-transform: uppercase;
      letter-spacing: 1px;
      font-family: 'Poppins', sans-serif;
    }
    
    .btn-primary {
      background: linear-gradient(135deg, #ffd700, #daa520);
      color: #000;
      box-shadow: 0 4px 15px rgba(255,215,0,0.3);
    }
    
    .btn-primary:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 25px rgba(255,215,0,0.5);
    }
    
    .btn-secondary {
      background: rgba(255,215,0,0.15);
      border: 2px solid rgba(255,215,0,0.3);
      color: #ffd700;
      margin-bottom: 15px;
    }
    
    .btn-secondary:hover {
      background: rgba(255,215,0,0.25);
      border-color: rgba(255,215,0,0.5);
    }
    
    .result {
      display: none;
      background: linear-gradient(135deg, rgba(255,215,0,0.15), rgba(218,165,32,0.08));
      border: 2px solid #ffd700;
      border-radius: 20px;
      padding: 30px;
      text-align: center;
      animation: fadeIn 0.5s ease;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .result h2 {
      color: #ffd700;
      font-size: 1.5em;
      margin-bottom: 20px;
    }
    
    .result-price {
      font-size: 3em;
      color: #fff;
      font-weight: 700;
      margin: 20px 0;
      text-shadow: 0 0 20px rgba(255,215,0,0.5);
    }
    
    .result-details {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin-top: 25px;
    }
    
    .detail-item {
      background: rgba(255,255,255,0.05);
      padding: 20px;
      border-radius: 12px;
      border: 1px solid rgba(255,215,0,0.2);
    }
    
    .detail-label {
      color: #c9a136;
      font-size: 0.9em;
      margin-bottom: 8px;
    }
    
    .detail-value {
      color: #fff;
      font-size: 1.5em;
      font-weight: 700;
    }
    
    .profit-section {
      margin-top: 30px;
      padding: 25px;
      border-radius: 15px;
      border: 2px solid rgba(76,175,80,0.3);
      background: rgba(76,175,80,0.08);
    }
    
    .profit-section.loss {
      border-color: rgba(244,67,54,0.3);
      background: rgba(244,67,54,0.08);
    }
    
    .profit-label {
      color: #4CAF50;
      font-size: 0.9em;
      margin-bottom: 8px;
      font-weight: 600;
    }
    
    .profit-section.loss .profit-label {
      color: #F44336;
    }
    
    .profit-value {
      font-size: 2.2em;
      color: #4CAF50;
      font-weight: 700;
      margin-bottom: 12px;
    }
    
    .profit-section.loss .profit-value {
      color: #F44336;
    }
    
    .profit-details {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 15px;
      margin-top: 15px;
    }
    
    .profit-detail-item {
      background: rgba(255,255,255,0.05);
      padding: 15px;
      border-radius: 10px;
      border: 1px solid rgba(255,255,255,0.1);
    }
    
    .profit-detail-label {
      color: #bbb;
      font-size: 0.85em;
      margin-bottom: 6px;
    }
    
    .profit-detail-value {
      color: #fff;
      font-size: 1.4em;
      font-weight: 700;
    }
    
    .tip-box {
      background: rgba(255,215,0,0.08);
      border: 1px solid rgba(255,215,0,0.2);
      border-radius: 15px;
      padding: 20px;
      margin-top: 20px;
    }
    
    .tip-box strong {
      color: #ffd700;
    }
    
    .tip-box p {
      color: #ddd;
      line-height: 1.7;
      margin-top: 10px;
    }
    
    .current-price-section {
      background: rgba(255,215,0,0.08);
      border: 1px solid rgba(255,215,0,0.3);
      border-radius: 15px;
      padding: 20px;
      margin-bottom: 20px;
    }
    
    @media (max-width: 768px) {
      h1 {
        font-size: 2em;
      }
      
      .result-price {
        font-size: 2.5em;
      }
      
      .result-details {
        grid-template-columns: 1fr;
      }
      
      .profit-value {
        font-size: 1.8em;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>üí∞ ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢</h1>
      <p class="subtitle">Average Down Calculator</p>
    </div>
    
    <div class="card">
      <div id="purchases">
        <div class="purchase-item" data-index="1">
          <div class="purchase-header">
            <span class="purchase-label">‡∏Å‡∏≤‡∏£‡∏ã‡∏∑‡πâ‡∏≠‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà 1</span>
          </div>
          <div class="input-group">
            <label>üíµ ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ã‡∏∑‡πâ‡∏≠ (‡∏ö‡∏≤‡∏ó/‡∏´‡∏∏‡πâ‡∏ô)</label>
            <input type="number" placeholder="‡πÄ‡∏ä‡πà‡∏ô 50.00" class="price" step="0.01" min="0">
          </div>
          <div class="input-group">
            <label>üìä ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏´‡∏∏‡πâ‡∏ô</label>
            <input type="number" placeholder="‡πÄ‡∏ä‡πà‡∏ô 100" class="shares" min="0">
          </div>
        </div>
      </div>
      
      <button class="btn btn-secondary" onclick="addPurchase()">+ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏ã‡∏∑‡πâ‡∏≠‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÉ‡∏´‡∏°‡πà</button>
      <button class="btn btn-primary" onclick="calculate()">üßÆ ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢</button>
    </div>

    <div class="result" id="result">
      <h2>üìà ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì</h2>
      <div style="color: #c9a136; margin-bottom: 10px;">‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢‡∏ï‡πà‡∏≠‡∏´‡∏∏‡πâ‡∏ô</div>
      <div class="result-price" id="avgCost">0.00 ‡∏ø</div>
      
      <div class="result-details">
        <div class="detail-item">
          <div class="detail-label">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏´‡∏∏‡πâ‡∏ô‡∏£‡∏ß‡∏°</div>
          <div class="detail-value" id="totalShares">0</div>
        </div>
        <div class="detail-item">
          <div class="detail-label">‡πÄ‡∏á‡∏¥‡∏ô‡∏•‡∏á‡∏ó‡∏∏‡∏ô‡∏£‡∏ß‡∏°</div>
          <div class="detail-value" id="totalCost">0.00 ‡∏ø</div>
        </div>
      </div>

      <div class="current-price-section">
        <div class="input-group">
          <label>üìä ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô (‡∏ö‡∏≤‡∏ó/‡∏´‡∏∏‡πâ‡∏ô)</label>
          <input type="number" placeholder="‡πÄ‡∏ä‡πà‡∏ô 55.50" id="currentPrice" class="current-price" step="0.01" min="0" oninput="updateProfitCalculation()">
        </div>
      </div>

      <div id="profitSection" style="display: none;">
        <div class="profit-section" id="profitBox">
          <div class="profit-label">üíπ ‡∏Å‡∏≥‡πÑ‡∏£ / ‡∏Ç‡∏≤‡∏î‡∏ó‡∏∏‡∏ô</div>
          <div class="profit-value" id="profitPercent">0%</div>
          
          <div class="profit-details">
            <div class="profit-detail-item">
              <div class="profit-detail-label">‡∏Å‡∏≥‡πÑ‡∏£/‡∏Ç‡∏≤‡∏î‡∏ó‡∏∏‡∏ô‡∏ï‡πà‡∏≠‡∏´‡∏∏‡πâ‡∏ô</div>
              <div class="profit-detail-value" id="profitPerShare">0.00 ‡∏ø</div>
            </div>
            <div class="profit-detail-item">
              <div class="profit-detail-label">‡∏Å‡∏≥‡πÑ‡∏£/‡∏Ç‡∏≤‡∏î‡∏ó‡∏∏‡∏ô‡∏£‡∏ß‡∏°</div>
              <div class="profit-detail-value" id="profitTotal">0.00 ‡∏ø</div>
            </div>
          </div>
        </div>
      </div>
      
      <div class="tip-box">
        <strong>üí° ‡πÄ‡∏Ñ‡∏•‡πá‡∏î‡∏•‡∏±‡∏ö:</strong>
        <p>‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏≤‡∏Ñ‡∏≤‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏ß‡πà‡∏≤‡∏´‡∏≤‡∏Å‡∏Ñ‡∏∏‡∏ì‡∏Ç‡∏≤‡∏¢‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡πÑ‡∏î‡πâ‡∏Å‡∏≥‡πÑ‡∏£‡∏´‡∏£‡∏∑‡∏≠‡∏Ç‡∏≤‡∏î‡∏ó‡∏∏‡∏ô‡∏Å‡∏µ‡πà‡πÄ‡∏õ‡∏≠‡∏£‡πå‡πÄ‡∏ã‡πá‡∏ô‡∏ï‡πå</p>
      </div>
    </div>
  </div>

  <script>
    let purchaseCount = 1;

    function addPurchase() {
      purchaseCount++;
      const div = document.createElement('div');
      div.className = 'purchase-item';
      div.setAttribute('data-index', purchaseCount);
      div.innerHTML = `
        <div class="purchase-header">
          <span class="purchase-label">‡∏Å‡∏≤‡∏£‡∏ã‡∏∑‡πâ‡∏≠‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà ${purchaseCount}</span>
          <button class="remove-btn" onclick="removePurchase(this)">üóëÔ∏è ‡∏•‡∏ö</button>
        </div>
        <div class="input-group">
          <label>üíµ ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ã‡∏∑‡πâ‡∏≠ (‡∏ö‡∏≤‡∏ó/‡∏´‡∏∏‡πâ‡∏ô)</label>
          <input type="number" placeholder="‡πÄ‡∏ä‡πà‡∏ô 45.00" class="price" step="0.01" min="0">
        </div>
        <div class="input-group">
          <label>üìä ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏´‡∏∏‡πâ‡∏ô</label>
          <input type="number" placeholder="‡πÄ‡∏ä‡πà‡∏ô 200" class="shares" min="0">
        </div>
      `;
      document.getElementById('purchases').appendChild(div);
    }

    function removePurchase(btn) {
      const item = btn.closest('.purchase-item');
      item.remove();
      updatePurchaseNumbers();
    }

    function updatePurchaseNumbers() {
      const items = document.querySelectorAll('.purchase-item');
      items.forEach((item, index) => {
        const label = item.querySelector('.purchase-label');
        label.textContent = `‡∏Å‡∏≤‡∏£‡∏ã‡∏∑‡πâ‡∏≠‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà ${index + 1}`;
        item.setAttribute('data-index', index + 1);
      });
      purchaseCount = items.length;
    }

    function calculate() {
      const prices = document.querySelectorAll('.price');
      const shares = document.querySelectorAll('.shares');
      
      let totalCost = 0;
      let totalShares = 0;
      let hasData = false;

      for (let i = 0; i < prices.length; i++) {
        const price = parseFloat(prices[i].value) || 0;
        const share = parseFloat(shares[i].value) || 0;
        
        if (price > 0 && share > 0) {
          totalCost += price * share;
          totalShares += share;
          hasData = true;
        }
      }

      if (!hasData) {
        alert('‚ö†Ô∏è ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£');
        return;
      }

      const avgCost = totalShares > 0 ? totalCost / totalShares : 0;

      // ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå
      document.getElementById('avgCost').textContent = avgCost.toFixed(2) + ' ‡∏ø';
      document.getElementById('totalShares').textContent = totalShares.toLocaleString();
      document.getElementById('totalCost').textContent = totalCost.toLocaleString(undefined, {
        minimumFractionDigits: 2,
        maximumFractionDigits: 2
      }) + ' ‡∏ø';
      
      // ‡πÄ‡∏Å‡πá‡∏ö‡∏Ñ‡πà‡∏≤‡πÑ‡∏ß‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Å‡∏≥‡πÑ‡∏£
      window.totalCostValue = totalCost;
      window.totalSharesValue = totalShares;
      window.avgCostValue = avgCost;
      
      const resultDiv = document.getElementById('result');
      resultDiv.style.display = 'block';
      
      // ‡∏•‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô
      document.getElementById('currentPrice').value = '';
      document.getElementById('profitSection').style.display = 'none';
      
      // Scroll ‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå
      resultDiv.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
    }

    function updateProfitCalculation() {
      const currentPrice = parseFloat(document.getElementById('currentPrice').value) || 0;
      
      if (!window.avgCostValue || currentPrice === 0) {
        document.getElementById('profitSection').style.display = 'none';
        return;
      }

      const profitPerShare = currentPrice - window.avgCostValue;
      const profitPercent = ((profitPerShare / window.avgCostValue) * 100).toFixed(2);
      const profitTotal = profitPerShare * window.totalSharesValue;

      // ‡πÅ‡∏™‡∏î‡∏á‡∏™‡πà‡∏ß‡∏ô‡∏Å‡∏≥‡πÑ‡∏£
      document.getElementById('profitSection').style.display = 'block';
      
      const profitBox = document.getElementById('profitBox');
      const profitLabel = profitBox.querySelector('.profit-label');
      const profitValue = profitBox.querySelector('.profit-value');

      // ‡∏ï‡∏±‡∏ß‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏™‡∏µ‡∏ï‡∏≤‡∏°‡∏Å‡∏≥‡πÑ‡∏£/‡∏Ç‡∏≤‡∏î‡∏ó‡∏∏‡∏ô
      if (profitPercent >= 0) {
        profitBox.classList.remove('loss');
        profitLabel.textContent = 'üíπ ‡∏Å‡∏≥‡πÑ‡∏£';
        profitValue.textContent = '+' + profitPercent + '%';
      } else {
        profitBox.classList.add('loss');
        profitLabel.textContent = 'üìâ ‡∏Ç‡∏≤‡∏î‡∏ó‡∏∏‡∏ô';
        profitValue.textContent = profitPercent + '%';
      }

      // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î
      document.getElementById('profitPerShare').textContent = profitPerShare.toFixed(2) + ' ‡∏ø';
      document.getElementById('profitTotal').textContent = (profitTotal >= 0 ? '+' : '') + profitTotal.toLocaleString(undefined, {
        minimumFractionDigits: 2,
        maximumFractionDigits: 2
      }) + ' ‡∏ø';
    }

    // ‡πÄ‡∏û‡∏¥‡πà‡∏° Enter key support
    document.addEventListener('keypress', function(e) {
      if (e.key === 'Enter') {
        calculate();
      }
    });
  </script>
</body>
</html>
