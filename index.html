<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>DOOHOON AI ‚Äì ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏´‡∏∏‡πâ‡∏ô‡∏î‡πâ‡∏ß‡∏¢ AI</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      background: radial-gradient(circle at 30% 20%, rgba(255,215,0,0.12), transparent 65%), 
                  radial-gradient(circle at 80% 80%, rgba(218,165,32,0.08), transparent 60%),
                  #0a0a0a;
      color: #fff;
      font-family: 'Poppins', sans-serif;
      text-align: center;
      margin: 0;
      padding: 0;
      min-height: 100vh;
      overflow-x: hidden;
    }

    /* Header */
    header {
      padding: 50px 20px 30px;
      position: relative;
    }

    h1 {
      font-size: 3.5em;
      font-weight: 700;
      background: linear-gradient(135deg, #ffd700 0%, #ffed4e 25%, #ffd700 50%, #daa520 75%, #ffd700 100%);
      background-size: 200% auto;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 15px;
      letter-spacing: 4px;
      animation: shimmer 3s linear infinite;
    }

    @keyframes shimmer {
      0% { background-position: 0% center; }
      100% { background-position: 200% center; }
    }

    .tagline {
      color: #c9a136;
      margin-top: 10px;
      font-size: 1.2em;
      font-weight: 400;
      letter-spacing: 1px;
      opacity: 0.9;
    }

    /* Search Section */
    .search-section {
      max-width: 700px;
      margin: 40px auto;
      padding: 0 20px;
    }

    .search-wrapper {
      background: rgba(255,255,255,0.04);
      backdrop-filter: blur(20px);
      border: 2px solid rgba(255,215,0,0.2);
      border-radius: 16px;
      padding: 10px;
      display: flex;
      gap: 12px;
      align-items: center;
      transition: all 0.3s ease;
      box-shadow: 0 8px 32px rgba(0,0,0,0.3);
    }

    .search-wrapper:focus-within {
      border-color: rgba(255,215,0,0.5);
      box-shadow: 0 8px 40px rgba(255,215,0,0.2);
    }

    input {
      flex: 1;
      padding: 18px 24px;
      border-radius: 12px;
      border: none;
      background: transparent;
      color: #fff;
      font-size: 1.1em;
      font-family: 'Poppins', sans-serif;
      outline: none;
      font-weight: 500;
    }

    input::placeholder {
      color: rgba(255,255,255,0.4);
    }

    button {
      padding: 18px 36px;
      background: linear-gradient(135deg, #ffd700, #daa520);
      border: none;
      border-radius: 12px;
      color: #000;
      font-weight: 700;
      font-size: 1.05em;
      cursor: pointer;
      transition: all 0.3s ease;
      text-transform: uppercase;
      letter-spacing: 1px;
      box-shadow: 0 4px 15px rgba(255,215,0,0.3);
      font-family: 'Poppins', sans-serif;
    }

    button:hover {
      transform: translateY(-3px);
      background: linear-gradient(135deg, #ffec7f, #ffb400);
      box-shadow: 0 6px 25px rgba(255,215,0,0.5);
    }

    button:active {
      transform: translateY(-1px);
    }

    /* Quick Picks */
    .quick-picks {
      margin-top: 20px;
      color: #666;
      font-size: 0.95em;
    }

    .quick-picks span {
      display: inline-block;
      margin: 5px 8px;
      padding: 8px 16px;
      background: rgba(255,215,0,0.08);
      border: 1px solid rgba(255,215,0,0.2);
      border-radius: 8px;
      color: #daa520;
      cursor: pointer;
      transition: all 0.3s ease;
      font-weight: 600;
    }

    .quick-picks span:hover {
      background: rgba(255,215,0,0.15);
      border-color: rgba(255,215,0,0.4);
      color: #ffd700;
      transform: translateY(-2px);
    }

    /* Price Box */
    #priceBox {
      display: none;
      margin: 30px auto;
      max-width: 400px;
      background: linear-gradient(135deg, rgba(255,215,0,0.1), rgba(218,165,32,0.05));
      border: 2px solid rgba(255,215,0,0.3);
      border-radius: 16px;
      padding: 24px;
      line-height: 1.8;
      box-shadow: 0 8px 32px rgba(0,0,0,0.3);
      animation: fadeIn 0.5s ease;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    #priceBox b {
      font-size: 1.4em;
      color: #ffd700;
      display: block;
      margin-bottom: 12px;
    }

    #priceBox .up { 
      color: #00ff88;
      font-weight: 600;
    }

    #priceBox .down { 
      color: #ff6b6b;
      font-weight: 600;
    }

    /* TradingView Chart */
    #tradingview {
      margin: 30px auto;
      max-width: 900px;
      height: 450px;
      border-radius: 20px;
      overflow: hidden;
      display: none;
      border: 2px solid rgba(255,215,0,0.2);
      box-shadow: 0 8px 32px rgba(0,0,0,0.3);
      animation: fadeIn 0.6s ease;
    }

    /* Result Box */
    #result {
      display: none;
      margin: 40px auto;
      text-align: left;
      background: rgba(255,255,255,0.04);
      backdrop-filter: blur(20px);
      padding: 35px;
      border-radius: 20px;
      border: 2px solid rgba(255,215,0,0.2);
      max-width: 900px;
      line-height: 1.9;
      box-shadow: 0 8px 32px rgba(0,0,0,0.4);
      animation: fadeIn 0.7s ease;
    }

    #result h3 {
      color: #ffd700;
      font-size: 1.8em;
      margin-bottom: 20px;
      border-bottom: 2px solid rgba(255,215,0,0.3);
      padding-bottom: 15px;
    }

    #result h4 {
      color: #ffed4e;
      margin-top: 25px;
      margin-bottom: 12px;
      font-size: 1.3em;
    }

    #result p {
      color: #ddd;
      margin-bottom: 15px;
    }

    #result ul {
      margin-left: 20px;
      color: #ccc;
    }

    #result li {
      margin-bottom: 8px;
    }

    #result strong {
      color: #ffd700;
    }

    /* Loading Animation */
    .loading-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 40px;
    }

    .loading {
      display: inline-block;
      margin-bottom: 20px;
      border: 4px solid rgba(255,215,0,0.2);
      border-top: 4px solid #ffd700;
      border-radius: 50%;
      width: 50px;
      height: 50px;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    .loading-text {
      color: #ffd700;
      font-size: 1.1em;
      font-weight: 600;
    }

    /* Error Message */
    .error-message {
      background: rgba(255,68,68,0.1);
      border: 2px solid rgba(255,68,68,0.3);
      color: #ff6b6b;
      padding: 20px;
      border-radius: 12px;
      margin-top: 20px;
    }

    /* Footer */
    footer {
      color: #666;
      margin-top: 80px;
      font-size: 0.9em;
      padding: 30px 20px;
      border-top: 1px solid rgba(255,215,0,0.1);
    }

    footer p {
      margin: 5px 0;
    }

    /* Responsive */
    @media (max-width: 768px) {
      h1 {
        font-size: 2.5em;
        letter-spacing: 2px;
      }

      .tagline {
        font-size: 1em;
      }

      .search-wrapper {
        flex-direction: column;
      }

      button {
        width: 100%;
      }

      #tradingview {
        height: 350px;
      }

      #result {
        padding: 25px;
      }
    }

    /* Additional Styling for AI Content */
    .stock-data {
      background: rgba(255,215,0,0.05);
      padding: 20px;
      border-radius: 12px;
      margin: 20px 0;
      border-left: 4px solid #ffd700;
    }

    .warning-box {
      background: rgba(255,215,0,0.08);
      border: 1px solid rgba(255,215,0,0.2);
      padding: 20px;
      border-radius: 12px;
      margin-top: 25px;
      font-size: 0.95em;
    }

    .warning-box strong {
      color: #ffd700;
    }
  </style>
</head>
<body>
  <header>
    <h1>DOOHOON AI</h1>
    <p class="tagline">‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏´‡∏∏‡πâ‡∏ô‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏î‡πâ‡∏ß‡∏¢‡∏û‡∏•‡∏±‡∏á AI ‡πÅ‡∏•‡∏∞‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏•‡∏≤‡∏î‡∏à‡∏£‡∏¥‡∏á üìà</p>
  </header>

  <div class="search-section">
    <div class="search-wrapper">
      <input 
        id="stockInput" 
        type="text" 
        placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏∏‡πâ‡∏ô ‡πÄ‡∏ä‡πà‡∏ô NVDA, AAPL, TSLA..." 
        onkeypress="if(event.key==='Enter') summarizeStock()"
      />
      <button onclick="summarizeStock()">‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏´‡∏∏‡πâ‡∏ô</button>
    </div>
    <div class="quick-picks">
      ‡∏•‡∏≠‡∏á‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤: 
      <span onclick="quickSearch('AAPL')">AAPL</span>
      <span onclick="quickSearch('NVDA')">NVDA</span>
      <span onclick="quickSearch('TSLA')">TSLA</span>
      <span onclick="quickSearch('GOOGL')">GOOGL</span>
      <span onclick="quickSearch('MSFT')">MSFT</span>
    </div>
  </div>

  <div id="priceBox"></div>
  <div id="tradingview"></div>
  <div id="result"></div>

  <footer>
    <p><strong>¬© 2025 DOOHOON AI</strong></p>
    <p>‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏´‡∏∏‡πâ‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡∏û‡∏•‡∏±‡∏á AI | Powered by Finnhub & OpenAI</p>
  </footer>

  <!-- TradingView Script -->
  <script src="https://s3.tradingview.com/tv.js"></script>

  <script>
    // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô Quick Search
    function quickSearch(symbol) {
      document.getElementById('stockInput').value = symbol;
      summarizeStock();
    }

    // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏´‡∏•‡∏±‡∏Å‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏´‡∏∏‡πâ‡∏ô
    async function summarizeStock() {
      const symbol = document.getElementById('stockInput').value.trim().toUpperCase();
      const resultDiv = document.getElementById('result');
      const priceBox = document.getElementById('priceBox');
      const tradingDiv = document.getElementById('tradingview');

      // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö input
      if (!symbol) {
        resultDiv.style.display = 'block';
        resultDiv.innerHTML = '<div class="error-message">‚ö†Ô∏è ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏∏‡πâ‡∏ô ‡πÄ‡∏ä‡πà‡∏ô NVDA, AAPL, TSLA</div>';
        priceBox.style.display = 'none';
        tradingDiv.style.display = 'none';
        return;
      }

      // ‡πÅ‡∏™‡∏î‡∏á Loading
      resultDiv.style.display = 'block';
      resultDiv.innerHTML = `
        <div class="loading-container">
          <div class="loading"></div>
          <div class="loading-text">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÉ‡∏´‡πâ AI ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏´‡∏∏‡πâ‡∏ô ${symbol} ...</div>
        </div>
      `;
      priceBox.style.display = 'none';
      tradingDiv.style.display = 'none';

      try {
        console.log('üîç ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡∏∏‡πâ‡∏ô:', symbol);

        // ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å API
        const res = await fetch(`ai_stock_summary.php?symbol=${symbol}`);
        
        if (!res.ok) {
          throw new Error(`HTTP Error: ${res.status}`);
        }

        const data = await res.json();
        console.log('üìä ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ:', data);

        // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö error
        if (data.error) {
          resultDiv.innerHTML = `<div class="error-message">‚ùå ${data.error}</div>`;
          return;
        }

        // ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏£‡∏≤‡∏Ñ‡∏≤‡∏´‡∏∏‡πâ‡∏ô (‡∏î‡∏∂‡∏á‡∏à‡∏≤‡∏Å‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÉ‡∏ô summary)
        if (data.summary) {
          // ‡∏•‡∏≠‡∏á‡∏´‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏≤‡∏Ñ‡∏≤‡∏à‡∏≤‡∏Å summary
          const priceMatch = data.summary.match(/‡∏£‡∏≤‡∏Ñ‡∏≤‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô[:\s]*([\d,\.]+)\s*USD/i);
          const changeMatch = data.summary.match(/([\+\-]?\d+\.?\d*)\s*USD.*?([\+\-]?\d+\.?\d*)%/);
          
          if (priceMatch) {
            const price = priceMatch[1];
            let changeHTML = '';
            
            if (changeMatch) {
              const change = changeMatch[1];
              const percent = changeMatch[2];
              const isUp = parseFloat(change) >= 0;
              changeHTML = `<span class="${isUp ? 'up' : 'down'}">${isUp ? '‚ñ≤' : '‚ñº'} ${change} USD (${percent}%)</span>`;
            }
            
            priceBox.style.display = 'block';
            priceBox.innerHTML = `
              <b>${symbol}</b><br>
              üí∞ ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô: <strong style="color: #ffd700; font-size: 1.3em;">${price} USD</strong><br>
              ${changeHTML}
            `;
          }
        }

        // ‡πÅ‡∏™‡∏î‡∏á‡∏Å‡∏£‡∏≤‡∏ü TradingView
        tradingDiv.innerHTML = ''; // Clear previous chart
        tradingDiv.style.display = 'block';
        
        new TradingView.widget({
          "container_id": "tradingview",
          "width": "100%",
          "height": "450",
          "symbol": symbol,
          "interval": "D",
          "timezone": "Etc/UTC",
          "theme": "dark",
          "style": "1",
          "locale": "th",
          "toolbar_bg": "#0a0a0a",
          "enable_publishing": false,
          "hide_legend": false,
          "save_image": false,
          "studies": [],
          "details": true,
          "hotlist": false,
          "calendar": false
        });

        // ‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏£‡∏∏‡∏õ AI
        resultDiv.innerHTML = `
          <h3>üìä ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏´‡∏∏‡πâ‡∏ô ${symbol}</h3>
          <div style="color: #ddd; line-height: 1.9;">
            ${data.summary}
          </div>
          <div class="warning-box">
            <strong>‚ö†Ô∏è ‡∏Ñ‡∏≥‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô:</strong><br>
            ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÇ‡∏î‡∏¢ AI ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏á‡∏ó‡∏∏‡∏ô 
            ‡∏ú‡∏π‡πâ‡∏•‡∏á‡∏ó‡∏∏‡∏ô‡∏Ñ‡∏ß‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°‡πÅ‡∏•‡∏∞‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡∏•‡∏á‡∏ó‡∏∏‡∏ô
          </div>
        `;

        console.log('‚ú® ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢');

      } catch (err) {
        console.error('‚ùå Error:', err);
        resultDiv.innerHTML = `
          <div class="error-message">
            <h3>‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î</h3>
            <p>${err.message}</p>
            <p style="margin-top: 15px; font-size: 0.9em;">
              ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö:<br>
              ‚Ä¢ ‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏∏‡πâ‡∏ô‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á (‡πÄ‡∏ä‡πà‡∏ô AAPL, NVDA, TSLA)<br>
              ‚Ä¢ ‡πÑ‡∏ü‡∏•‡πå ai_stock_summary.php ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô<br>
              ‚Ä¢ ‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥
            </p>
          </div>
        `;
      }
    }

    // Auto-focus input on page load
    window.addEventListener('load', () => {
      document.getElementById('stockInput').focus();
    });
  </script>
</body>
</html>
